# MobileCoderMCP - Simplified PRD (Serverless Edition)

**Version:** 2.1  

**Date:** December 2024  

**Status:** MVP+ - Zero Cost Architecture with Advanced Features  

**Owner:** Solo Founder

---

## Executive Summary

**MobileCoderMCP** is a web-based mobile app that connects directly to your desktop coding environment (Cursor, Windsurf, Zed, etc.) via MCP protocol. Users sign in with Google, do one-time MCP setup, and instantly start coding from their phone.

### Key Architecture Decision: P2P + Serverless

- **No backend costs** - Direct WebRTC connection between phone and desktop
- **Cloudflare Pages** - Free hosting for web app
- **Cloudflare Workers** - Free signaling server (WebRTC coordination)
- **No database** - Everything stored locally or in MCP config

---

## 1. Simplified Architecture

### System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Mobile PWA     â”‚ â† Cloudflare Pages (FREE)
â”‚   (React)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ WebRTC (P2P)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Server      â”‚ â† User's Computer
â”‚  (Node.js)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ MCP Protocol
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cursor/Windsurf  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Why This Works (Zero Cost)

1. **Cloudflare Pages:** Unlimited free hosting for static sites
2. **Cloudflare Workers:** 100K free requests/day for signaling
3. **WebRTC:** Direct peer-to-peer connection (no relay server needed)
4. **Google OAuth:** Free authentication
5. **localStorage:** No database needed

---

## 2. Tech Stack (All Free)

### Frontend (Mobile PWA)

```
- React 18 (Vite)
- TailwindCSS
- Zustand (state management)
- Simple-peer (WebRTC)
- React Router
- Lucide Icons
```

### Serverless Backend

```
- Cloudflare Workers (signaling server)
- Cloudflare D1 (optional, free SQLite - for future)
- Cloudflare KV (optional, free key-value store)
```

### Desktop MCP Server

```
- Node.js + TypeScript
- ws (WebSocket server)
- simple-peer (WebRTC)
- @modelcontextprotocol/sdk
```

### Authentication

```
- Google OAuth (Firebase Auth FREE tier)
- JWT tokens (stored in localStorage)
```

---

## 3. User Flow (Super Simple)

### First Time Setup (5 minutes)

```
1. Visit: mobilecodermcp.com
2. Click "Sign in with Google" â†’ Login
3. See Dashboard with "Connect MCP" button
4. Click â†’ Shows setup instructions:

   ğŸ“‹ Copy this command:

   npx mobile-coder-mcp init --code=ABC123

5. Run on computer â†’ MCP server starts
6. Auto-pairs via WebRTC
7. âœ… Connected! Go to Chat
```

### Daily Usage (10 seconds)

```
1. Open mobilecodermcp.com
2. Already logged in (Google)
3. Auto-connects to desktop (if online)
4. Start typing commands immediately
```

---

## 4. Core Features (MVP)

### 4.1 Authentication Screen

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”‚
â”‚    ğŸ“± MobileCoderMCP        â”‚
â”‚                             â”‚
â”‚    Code from Anywhere       â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ”µ Sign in with      â”‚  â”‚
â”‚  â”‚     Google            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚    Free Forever â€¢ No CC     â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ John Doe          â˜°     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  Connection Status          â”‚
â”‚  ğŸŸ¢ Connected to Desktop    â”‚
â”‚  Last seen: Just now        â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸš€ Start Coding      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  âš™ï¸  Reconnect MCP    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  Recent Commands            â”‚
â”‚  â€¢ Fix navbar layout        â”‚
â”‚  â€¢ Add login form           â”‚
â”‚  â€¢ Update README            â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 Chat Interface (Main Screen)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Dashboard      ğŸŸ¢        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  You:                       â”‚
â”‚  Add a dark mode toggle     â”‚
â”‚  to the settings page       â”‚
â”‚                       12:34 â”‚
â”‚                             â”‚
â”‚  ğŸ¤– MCP:                    â”‚
â”‚  âœ… Done! I've added:       â”‚
â”‚  â€¢ DarkModeToggle.jsx       â”‚
â”‚  â€¢ Updated Settings.jsx     â”‚
â”‚  â€¢ Added theme context      â”‚
â”‚                       12:35 â”‚
â”‚  [View Changes]             â”‚
â”‚                             â”‚
â”‚  You:                       â”‚
â”‚  Make it animated           â”‚
â”‚                       12:36 â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Type a command...       ğŸ“¤ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 Settings

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Back                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Settings                   â”‚
â”‚                             â”‚
â”‚  Connection                 â”‚
â”‚  â€¢ Reset MCP Connection     â”‚
â”‚  â€¢ View Connection Code     â”‚
â”‚                             â”‚
â”‚  Preferences                â”‚
â”‚  â€¢ Dark Mode [Toggle]       â”‚
â”‚  â€¢ Notifications [Toggle]   â”‚
â”‚  â€¢ Keep Screen On [Toggle]  â”‚
â”‚                             â”‚
â”‚  Account                    â”‚
â”‚  â€¢ john@example.com         â”‚
â”‚  â€¢ Sign Out                 â”‚
â”‚                             â”‚
â”‚  About                      â”‚
â”‚  â€¢ Version 1.0.0            â”‚
â”‚  â€¢ Help & Support           â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.5 Template Commands (Quick Actions)

**One-tap command buttons for common tasks:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Chat                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Quick Commands             â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”§ Fix   â”‚ â”‚ âš¡ Optimizeâ”‚ â”‚
â”‚  â”‚ ESLint   â”‚ â”‚ Imports   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“¦ Generateâ”‚ â”‚ ğŸ“± Create â”‚ â”‚
â”‚  â”‚ CRUD API â”‚ â”‚ Navbar    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ ğŸ” Add   â”‚              â”‚
â”‚  â”‚ Login    â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                             â”‚
â”‚  [View All Templates â†’]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Template Library:**

- **Code Quality:**
  - "Fix eslint warnings"
  - "Optimize imports"
  - "Format code"
  - "Remove unused code"

- **Common Features:**
  - "Generate CRUD API"
  - "Create responsive navbar"
  - "Add login page"
  - "Add dark mode toggle"
  - "Create user profile page"

- **Project Setup:**
  - "Initialize TypeScript"
  - "Setup testing framework"
  - "Add error handling"
  - "Create API routes"

**User Experience:**
- Tap button â†’ Command sent instantly
- No typing needed for common tasks
- Saves time, reduces typos
- Custom templates (coming soon)

### 4.6 Diff Viewer + Preview (Mini Modal)

**Side-by-side code comparison on mobile:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  View Changes          âœ•   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ContactForm.jsx       NEW  â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  OLD     â”‚ â”‚  NEW     â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚          â”‚ â”‚ + import â”‚ â”‚
â”‚  â”‚          â”‚ â”‚ + React  â”‚ â”‚
â”‚  â”‚          â”‚ â”‚          â”‚ â”‚
â”‚  â”‚ function â”‚ â”‚ function â”‚ â”‚
â”‚  â”‚ Contact  â”‚ â”‚ Contact â”‚ â”‚
â”‚  â”‚() {      â”‚ â”‚() {      â”‚ â”‚
â”‚  â”‚  return  â”‚ â”‚  return  â”‚ â”‚
â”‚  â”‚  null    â”‚ â”‚  <form>  â”‚ â”‚
â”‚  â”‚}         â”‚ â”‚  </form> â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [Reject] â”‚ â”‚ [Apply]  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- **Split view:** Old code (left) vs New code (right)
- **Syntax highlighting:** Color-coded diffs
- **Line numbers:** Easy reference
- **Quick actions:** Apply, Reject, or Edit
- **Scroll sync:** Both sides scroll together
- **Fullscreen mode:** Tap to expand

**Use Cases:**
- Code review on the go
- Verify changes before applying
- Learn from AI-generated code
- Catch potential bugs early

### 4.7 Mobile Keep Alive (Screen Lock Prevention)

**Prevents phone screen from locking during coding sessions:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Settings                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Preferences                â”‚
â”‚                             â”‚
â”‚  Keep Screen On             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  [ON]                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  ğŸ’¡ Screen stays awake      â”‚
â”‚     while coding            â”‚
â”‚                             â”‚
â”‚  âš ï¸  Uses more battery      â”‚
â”‚     when enabled            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation:**
- Uses Wake Lock API (when available)
- Falls back to video element trick (iOS)
- Auto-disables after 30 min of inactivity
- Battery indicator shows when active
- Can be toggled on/off in settings

**Benefits:**
- No interruptions during coding flow
- See results in real-time
- Better mobile coding experience
- Optional feature (off by default)

### 4.8 Offline Queue

**Queue commands when internet is unavailable:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Chat      ğŸ“´ Offline     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  You:                       â”‚
â”‚  Add login form             â”‚
â”‚                       12:34 â”‚
â”‚  â³ Queued (offline)        â”‚
â”‚                             â”‚
â”‚  You:                       â”‚
â”‚  Fix navbar                 â”‚
â”‚                       12:35 â”‚
â”‚  â³ Queued (offline)        â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  2 commands queued    â”‚  â”‚
â”‚  â”‚  Waiting for internet â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Type a command...       ğŸ“¤ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**When Connection Restored:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… Connection restored!    â”‚
â”‚                             â”‚
â”‚  Sending queued commands... â”‚
â”‚                             â”‚
â”‚  âœ“ Add login form           â”‚
â”‚  âœ“ Fix navbar               â”‚
â”‚                             â”‚
â”‚  [Dismiss]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- **Automatic queuing:** Commands saved locally
- **Queue indicator:** Shows number of queued items
- **Auto-send:** Sends when connection restored
- **Queue management:** View, edit, or delete queued commands
- **Offline badge:** Clear visual indicator
- **Sync status:** Shows last sync time

**Storage:**
- Commands stored in IndexedDB (persistent)
- Survives app restart
- Max 100 queued commands
- Oldest commands auto-deleted if limit reached

---

## 5. Technical Implementation

### 5.1 Cloudflare Pages Setup

**Deploy Command:**

```bash
npm run build
```

**Output Directory:** `dist`

**Environment Variables:**

```env
VITE_GOOGLE_CLIENT_ID=your_google_client_id
VITE_SIGNALING_SERVER=https://mcp-signal.your-worker.workers.dev
```

**Build Config (vite.config.js):**

```javascript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import { VitePWA } from 'vite-plugin-pwa'

export default defineConfig({
  plugins: [
    react(),
    VitePWA({
      registerType: 'autoUpdate',
      manifest: {
        name: 'MobileCoderMCP',
        short_name: 'MCP',
        theme_color: '#000000',
        icons: [
          {
            src: '/icon-192.png',
            sizes: '192x192',
            type: 'image/png'
          }
        ]
      }
    })
  ]
})
```

### 5.2 WebRTC Connection Flow

**Step 1: Signaling (via Cloudflare Worker)**

```javascript
// Mobile generates offer
const peer = new SimplePeer({ initiator: true })

peer.on('signal', signal => {
  // Send to signaling server
  fetch('https://mcp-signal.workers.dev/offer', {
    method: 'POST',
    body: JSON.stringify({ code: 'ABC123', signal })
  })
})

// Desktop receives offer
const response = await fetch('https://mcp-signal.workers.dev/poll?code=ABC123')
const { signal } = await response.json()
peer.signal(signal)
```

**Step 2: P2P Connection Established**

```javascript
peer.on('connect', () => {
  console.log('Connected to desktop!')
  // Now send commands directly
  peer.send(JSON.stringify({ 
    type: 'command', 
    text: 'Add login form' 
  }))
})

peer.on('data', data => {
  const message = JSON.parse(data)
  // Handle response from desktop
})
```

### 5.3 MCP Server (Desktop)

**Installation:**

```bash
npx mobile-coder-mcp init --code=ABC123
```

**Auto-Configuration:**

```javascript
// Automatically adds to Cursor config
{
  "mcpServers": {
    "mobile-coder": {
      "command": "mobile-coder-mcp",
      "args": ["--peer-code", "ABC123"]
    }
  }
}
```

**Server Code (Simplified):**

```typescript
import { McpServer } from '@modelcontextprotocol/sdk'
import SimplePeer from 'simple-peer'

// Connect to mobile via WebRTC
const peer = new SimplePeer({ initiator: false })

// Get signal from signaling server
const response = await fetch('https://mcp-signal.workers.dev/answer?code=ABC123')
const { signal } = await response.json()
peer.signal(signal)

// Initialize MCP
const server = new McpServer({
  name: 'mobile-coder',
  version: '1.0.0'
})

// Handle commands from mobile
peer.on('data', async (data) => {
  const message = JSON.parse(data)
  
  if (message.type === 'command') {
    // Send to Cursor via MCP
    const result = await server.callTool('execute_command', {
      command: message.text
    })
    
    // Send result back to mobile
    peer.send(JSON.stringify({
      type: 'result',
      data: result
    }))
  }
})
```

### 5.4 Cloudflare Worker (Signaling Server)

**File: `workers/signaling.js`**

```javascript
// Store peer signals temporarily (expires in 5 min)
const signals = new Map()

export default {
  async fetch(request) {
    const url = new URL(request.url)
    
    // Mobile posts offer
    if (url.pathname === '/offer' && request.method === 'POST') {
      const { code, signal } = await request.json()
      signals.set(`offer-${code}`, signal)
      setTimeout(() => signals.delete(`offer-${code}`), 300000)
      return new Response('OK')
    }
    
    // Desktop polls for offer
    if (url.pathname === '/poll' && request.method === 'GET') {
      const code = url.searchParams.get('code')
      const signal = signals.get(`offer-${code}`)
      return Response.json({ signal })
    }
    
    // Desktop posts answer
    if (url.pathname === '/answer' && request.method === 'POST') {
      const { code, signal } = await request.json()
      signals.set(`answer-${code}`, signal)
      setTimeout(() => signals.delete(`answer-${code}`), 300000)
      return new Response('OK')
    }
    
    // Mobile polls for answer
    if (url.pathname === '/answer' && request.method === 'GET') {
      const code = url.searchParams.get('code')
      const signal = signals.get(`answer-${code}`)
      return Response.json({ signal })
    }
    
    return new Response('Not Found', { status: 404 })
  }
}
```

**Deploy:**

```bash
npx wrangler deploy
```

**Free Tier:** 100,000 requests/day (more than enough!)

---

## 6. Data Storage Strategy (Zero Cost)

### LocalStorage (Mobile App)

```javascript
// User preferences
{
  "theme": "dark",
  "notifications": true,
  "keepScreenOn": false,
  "lastConnectionCode": "ABC123"
}

// Recent commands (last 50)
[
  { "text": "Add login form", "timestamp": 1234567890 },
  { "text": "Fix navbar", "timestamp": 1234567891 }
]

// Template commands (favorites)
[
  { "id": "fix-eslint", "text": "Fix eslint warnings", "category": "quality" },
  { "id": "optimize-imports", "text": "Optimize imports", "category": "quality" },
  { "id": "generate-crud", "text": "Generate CRUD API", "category": "features" }
]

// Offline queue (IndexedDB for persistence)
[
  {
    "id": "queue-1",
    "text": "Add login form",
    "timestamp": 1234567890,
    "status": "pending"
  }
]
```

### MCP Config (Desktop)

```json
// ~/.cursor/mcp.json
{
  "mcpServers": {
    "mobile-coder": {
      "command": "mobile-coder-mcp",
      "args": ["--peer-code", "ABC123"],
      "autoStart": true
    }
  }
}
```

**No database needed!** Everything is peer-to-peer and local.

---

## 7. Pricing Strategy (Simplified)

### Free Forever Model

**Everything is FREE because:**

- Cloudflare Pages: FREE
- Cloudflare Workers: FREE (100K req/day)
- WebRTC: FREE (P2P, no relay)
- Google OAuth: FREE
- No database: FREE

### Future Monetization (Optional)

If you want to monetize later:

**Free Tier:**

- Unlimited commands
- 1 connection
- Community support

**Pro ($4.99/month):**

- Multiple desktop connections
- Command history sync (add Cloudflare D1)
- Priority features
- Voice commands (future)

**How to add payments later:**

- Stripe Checkout (free to integrate)
- Lock pro features behind paywall
- Still mostly free for most users

---

## 8. Development Timeline

### Week 1: Frontend (Cloudflare Pages)

**Day 1-2:** Setup
- Create Vite + React project
- Setup Tailwind CSS
- Deploy to Cloudflare Pages

**Day 3-4:** Authentication
- Google OAuth integration
- User state management (Zustand)
- Protected routes

**Day 5-7:** Core UI
- Dashboard
- Chat interface
- Settings page

### Week 2: WebRTC + MCP Integration

**Day 1-3:** WebRTC
- Implement SimplePeer
- Create signaling client
- Test P2P connection

**Day 4-5:** MCP Desktop Server
- Create NPM package
- Implement MCP protocol
- Auto-configuration script

**Day 6-7:** Integration
- Connect mobile to desktop
- Command sending/receiving
- Error handling

### Week 3: Polish & Launch

**Day 1-3:** Testing
- Cross-browser testing
- Mobile responsive fixes
- Connection reliability

**Day 4-5:** Docs & Landing
- Setup instructions
- FAQ page
- Video tutorial

**Day 6-7:** Launch
- Product Hunt submission
- Twitter/Reddit posts
- Monitor feedback

**Total: 3 weeks to launch** ğŸš€

---

## 9. Technical Specs

### Frontend (Mobile PWA)

**File Structure:**

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Auth/
â”‚   â”‚   â””â”€â”€ GoogleSignIn.jsx
â”‚   â”œâ”€â”€ Dashboard/
â”‚   â”‚   â”œâ”€â”€ ConnectionStatus.jsx
â”‚   â”‚   â””â”€â”€ RecentCommands.jsx
â”‚   â”œâ”€â”€ Chat/
â”‚   â”‚   â”œâ”€â”€ ChatInterface.jsx
â”‚   â”‚   â”œâ”€â”€ MessageBubble.jsx
â”‚   â”‚   â”œâ”€â”€ CommandInput.jsx
â”‚   â”‚   â”œâ”€â”€ TemplateCommands.jsx    # NEW: Quick action buttons
â”‚   â”‚   â””â”€â”€ DiffViewer.jsx          # NEW: Side-by-side diff modal
â”‚   â””â”€â”€ Settings/
â”‚       â””â”€â”€ SettingsPanel.jsx
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ webrtc.js        # WebRTC logic
â”‚   â”œâ”€â”€ auth.js          # Google OAuth
â”‚   â”œâ”€â”€ storage.js       # localStorage helpers
â”‚   â”œâ”€â”€ queue.js         # NEW: Offline queue management
â”‚   â””â”€â”€ wakeLock.js      # NEW: Screen keep-alive
â”œâ”€â”€ store/
â”‚   â””â”€â”€ useStore.js      # Zustand store
â”œâ”€â”€ App.jsx
â””â”€â”€ main.jsx
```

**Key Libraries:**

```json
{
  "dependencies": {
    "react": "^18.3.1",
    "react-router-dom": "^6.x",
    "zustand": "^4.x",
    "simple-peer": "^9.x",
    "lucide-react": "^0.x",
    "firebase": "^10.x",
    "react-syntax-highlighter": "^15.x",  # NEW: Diff syntax highlighting
    "idb": "^7.x"                         # NEW: IndexedDB for offline queue
  },
  "devDependencies": {
    "vite": "^5.x",
    "tailwindcss": "^3.x",
    "vite-plugin-pwa": "^0.x"
  }
}
```

**New Features Implementation:**

1. **Template Commands:**
   - Pre-defined command library stored in localStorage
   - Quick action buttons in Chat interface
   - Categories: Code Quality, Common Features, Project Setup
   - One-tap execution

2. **Diff Viewer:**
   - Uses `react-syntax-highlighter` for syntax highlighting
   - Split view component (old vs new)
   - Scroll synchronization
   - Apply/Reject/Edit actions

3. **Mobile Keep Alive:**
   - Wake Lock API (when available)
   - Fallback: Hidden video element trick for iOS
   - Auto-disable after 30 min inactivity
   - Battery indicator

4. **Offline Queue:**
   - IndexedDB storage (persistent, survives restart)
   - Queue manager component
   - Auto-send when connection restored
   - Max 100 queued commands
```

### Desktop MCP Server

**Package.json:**

```json
{
  "name": "mobile-coder-mcp",
  "version": "1.0.0",
  "bin": {
    "mobile-coder-mcp": "./dist/index.js"
  },
  "dependencies": {
    "@modelcontextprotocol/sdk": "^1.x",
    "simple-peer": "^9.x",
    "wrtc": "^0.x",
    "commander": "^12.x"
  }
}
```

**CLI Commands:**

```bash
mobile-coder-mcp init --code=ABC123    # First time setup
mobile-coder-mcp start                 # Start server
mobile-coder-mcp status                # Check connection
mobile-coder-mcp reset                 # Reset connection
```

---

## 10. Security Considerations

### Authentication

- Google OAuth (secure by default)
- JWT tokens (httpOnly cookies if using Workers)
- No password storage needed

### Connection

- WebRTC encrypts all P2P data (DTLS-SRTP)
- Short-lived pairing codes (5 min expiry)
- No data passes through server (true P2P)

### Desktop Security

- MCP server only accepts commands from paired device
- User can revoke access anytime
- No file access without MCP permission

---

## 11. Cost Breakdown

### Monthly Costs: $0 ğŸ‰

| Service | Free Tier | Usage | Cost |
|---------|-----------|-------|------|
| Cloudflare Pages | Unlimited | Hosting | $0 |
| Cloudflare Workers | 100K req/day | Signaling | $0 |
| Google OAuth | Unlimited | Auth | $0 |
| WebRTC | Unlimited | P2P data | $0 |
| Domain (optional) | - | .com | $12/year |

**Break-even:** Immediate (no costs!)

**Scaling:** Support 10K users on free tier

---

## 12. Launch Checklist

### Pre-Launch

- [ ] Domain purchased (mobilecodermcp.com)
- [ ] Cloudflare Pages deployed
- [ ] Cloudflare Worker deployed
- [ ] Google OAuth configured
- [ ] MCP package published to NPM
- [ ] Landing page live
- [ ] Documentation complete
- [ ] Demo video recorded

### Launch Day

- [ ] Product Hunt submission (6am PST)
- [ ] Twitter announcement
- [ ] Reddit posts (r/Cursor, r/webdev)
- [ ] Dev.to article
- [ ] HackerNews post
- [ ] Discord communities
- [ ] Email waitlist (if collected)

### Post-Launch (Week 1)

- [ ] Monitor analytics
- [ ] Respond to feedback
- [ ] Fix critical bugs
- [ ] Update docs based on questions
- [ ] Engage with community

---

## 13. Success Metrics

### Week 1

- 500 unique visitors
- 100 Google sign-ins
- 20 successful MCP connections
- 5 active users (3+ commands)

### Month 1

- 2,000 unique visitors
- 500 sign-ups
- 100 active connections
- 50 DAU
- 5 community testimonials

### Month 3

- 5,000 sign-ups
- 500 active users
- 100 DAU
- Product Hunt #1 of the day
- Featured on HackerNews

---

## 14. Future Enhancements

### Phase 2 (Month 2-3) - **NOW IN MVP!**

- [x] **Template Commands** - One-tap quick actions (MVP)
- [x] **Diff Viewer + Preview** - Side-by-side code comparison (MVP)
- [x] **Mobile Keep Alive** - Screen lock prevention (MVP)
- [x] **Offline Queue** - Command queuing when offline (MVP)
- [ ] Custom template creation
- [ ] Voice commands (Web Speech API)
- [ ] Multi-project support

### Phase 3 (Month 4-6)

- [ ] VS Code support (via Cline extension)
- [ ] Windsurf support
- [ ] Team collaboration (share projects)
- [ ] Analytics dashboard
- [ ] Mobile app (React Native wrapper)

### Phase 4 (Month 7-12)

- [ ] AI suggestions for commands
- [ ] Command marketplace
- [ ] GitHub integration
- [ ] CI/CD triggers
- [ ] Desktop app (Electron)

---

## 15. FAQ

**Q: Why WebRTC instead of WebSocket?**

A: No server costs! Direct P2P connection is faster and free.

**Q: What if my desktop is behind firewall?**

A: WebRTC works through NAT/firewalls using STUN/TURN (free via Google STUN servers).

**Q: Is it secure?**

A: Yes! WebRTC encrypts all data end-to-end. No server sees your code.

**Q: What if desktop is offline?**

A: Commands are automatically queued in the app. When your desktop comes back online, all queued commands are sent automatically. You can see the queue status and manage queued commands.

**Q: Can I use template commands?**

A: Yes! We have a library of one-tap template commands for common tasks like "Fix eslint warnings", "Generate CRUD API", "Create responsive navbar", and more. Just tap the button and the command is sent instantly.

**Q: How do I review code changes on mobile?**

A: When a command completes, tap "View Changes" to see a side-by-side diff. Left side shows old code, right side shows new code. You can Apply, Reject, or Edit before accepting.

**Q: Can I prevent my phone screen from locking while coding?**

A: Yes! Enable "Keep Screen On" in Settings. This uses the Wake Lock API to keep your screen awake during coding sessions. It auto-disables after 30 minutes of inactivity to save battery.

**Q: Can I use multiple devices?**

A: MVP: 1 mobile â†’ 1 desktop. Future: Multiple connections in Pro plan.

**Q: Does it work with Windsurf/VS Code?**

A: MVP: Cursor only. Week 4+: Add Windsurf and VS Code support.

---

## 16. Marketing Strategy

### Landing Page Copy

**Hero:**

```
ğŸš€ Code from Anywhere

Use Cursor from your phone. Free forever.

[Sign in with Google]

âœ¨ No credit card â€¢ âš¡ Setup in 5 min â€¢ ğŸ”’ 100% secure
```

**Features:**

- ğŸ“± Works on any phone (PWA)
- ğŸ¯ Direct Cursor integration
- âš¡ Real-time code changes
- ğŸ†“ Completely free
- ğŸ” End-to-end encrypted

**Social Proof:**

> "This is genius! Finally can code during lunch break"

> "Setup took 2 minutes, works perfectly"

> "Exactly what I needed for my side project"

### Content Strategy

- Blog: "How to code from your phone in 2025"
- Twitter: Daily tips and user stories
- YouTube: 2-min demo video
- Reddit: Case studies and tutorials

---

## 17. Risks & Mitigation

| Risk | Impact | Mitigation |
|------|--------|------------|
| WebRTC connection fails | High | Provide troubleshooting guide, fallback to WebSocket relay |
| Cursor changes MCP protocol | Medium | Monitor updates, maintain compatibility layer |
| Low adoption | Medium | Focus on marketing, community building |
| Desktop always-on requirement | Medium | Add notification when desktop disconnects |

---

## Conclusion

**MobileCoderMCP MVP+:**

- âœ… Zero infrastructure costs
- âœ… 3 weeks to launch
- âœ… Free forever model
- âœ… Scalable to 10K users
- âœ… Simple setup (5 min)
- âœ… Real P2P connection
- âœ… Template Commands (one-tap actions)
- âœ… Diff Viewer + Preview (code review on mobile)
- âœ… Mobile Keep Alive (no screen lock)
- âœ… Offline Queue (work without internet)

**Next Steps:**

1. Setup Cloudflare Pages
2. Build frontend (Week 1)
3. Build MCP server (Week 2)
4. Test & launch (Week 3)

**Let's build this! ğŸš€**

